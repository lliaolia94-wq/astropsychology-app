# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –≥–æ—Ä–æ–¥–∞—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ 15,000+ –≥–æ—Ä–æ–¥–æ–≤:

```bash
python scripts/download_cities.py
python scripts/load_cities_db.py
```

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **`download_cities.py`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ GeoNames:
   - –°–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª `cities15000.zip` (15,000+ –≥–æ—Ä–æ–¥–æ–≤ —Å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º > 15,000)
   - –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç CSV
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `data/cities.csv`

2. **`load_cities_db.py`** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≥–æ—Ä–æ–¥–∞ –∏–∑ CSV –≤ JSON –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   - –ß–∏—Ç–∞–µ—Ç `data/cities.csv`
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –≥–æ—Ä–æ–¥–∞ (–º–∏–Ω–∏–º—É–º 50,000 –Ω–∞—Å–µ–ª–µ–Ω–∏—è)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `data/cities_db.json`
   - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python scripts/download_cities.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

1. –°–∫–∞—á–∞–π—Ç–µ `cities15000.zip` —Å https://download.geonames.org/export/dump/
2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ `cities15000.txt` –≤ –ø–∞–ø–∫—É `data/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python scripts/convert_geonames.py`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python scripts/load_cities_db.py`

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ CSV

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å CSV —Ñ–∞–π–ª —Å –≥–æ—Ä–æ–¥–∞–º–∏:

1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `data/cities.csv` –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```csv
   name,country,latitude,longitude,timezone,population
   Moscow,Russia,55.7558,37.6173,Europe/Moscow,12600000
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python scripts/load_cities_db.py`

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### CSV —Ñ–æ—Ä–º–∞—Ç (data/cities.csv):
```csv
name,country,latitude,longitude,timezone,population
–ú–æ—Å–∫–≤–∞,–†–æ—Å—Å–∏—è,55.7558,37.6173,Europe/Moscow,12600000
–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥,–†–æ—Å—Å–∏—è,59.9343,30.3351,Europe/Moscow,5400000
```

### JSON —Ñ–æ—Ä–º–∞—Ç (data/cities_db.json):
```json
{
  "–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è": {
    "lat": 55.7558,
    "lon": 37.6173,
    "country": "–†–æ—Å—Å–∏—è",
    "timezone": "Europe/Moscow",
    "population": 12600000
  }
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `scripts/load_cities_db.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

- `min_population=50000` - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50,000)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é —Å https://download.geonames.org/export/dump/
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `convert_geonames.py` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

–ï—Å–ª–∏ —Ñ–∞–π–ª `cities.csv` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π:

1. –£–≤–µ–ª–∏—á—å—Ç–µ `min_population` –≤ —Å–∫—Ä–∏–ø—Ç–µ
2. –ò–ª–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ CSV –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ CSV
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
ls -lh data/cities_db.json

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤
python -c "import json; print(len(json.load(open('data/cities_db.json'))))"
```

## üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

- **GeoNames**: https://www.geonames.org/export/
- **OpenStreetMap**: https://www.openstreetmap.org/
- **World Cities Database**: https://simplemaps.com/data/world-cities

